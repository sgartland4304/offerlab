<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mux Player Minimal</title>
  <script src="https://cdn.jsdelivr.net/npm/@mux/mux-player" defer></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #0a0a0a;
    }

    .player-wrapper {
      position: relative;
      width: 100%;
      max-width: 960px;
      cursor: pointer;
      border-radius: var(--rounded-4xl, 24px);
      overflow: hidden;
      aspect-ratio: 16 / 9; /* Prevents collapse; updated from video when loaded */
      opacity: 0;
      transition: opacity 0.4s ease;
    }

    .player-wrapper.loaded {
      opacity: 1;
    }

    @media (max-width: 768px) {
      .player-wrapper {
        border-radius: var(--rounded-3xl, 20px);
      }
    }

    mux-player {
      --controls: none;
      --dialog: none;
      --loading-indicator: none;
      width: 100%;
      display: block;
    }

    /* Custom play/pause button - visible on hover */
    .play-pause-btn {
      position: absolute;
      bottom: 8px;
      left: 8px;
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: rgb(0,0,0,0.4);
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      opacity: 0;
      transition: opacity 0.2s ease;
      pointer-events: none; /* Clicks pass through to wrapper */
    }

    .player-wrapper:hover .play-pause-btn {
      opacity: 1;
    }

    /* Keep button visible when paused (for tap-to-play on mobile) */
    .player-wrapper.paused .play-pause-btn {
      opacity: 1;
    }

    .play-pause-btn svg {
      width: 20px;
      height: 20px;
    }

    .play-pause-btn .icon-play {
      display: none;
    }

    .play-pause-btn .icon-pause {
      display: block;
    }

    .player-wrapper.paused .play-pause-btn .icon-play {
      display: block;
    }

    .player-wrapper.paused .play-pause-btn .icon-pause {
      display: none;
    }
  </style>
</head>
<body>
  <div class="player-wrapper" id="playerWrapper">
    <mux-player
      id="muxPlayer"
      playback-id="007PdmD3qoSHO00u00kRXIZjq8Ap7bWpz5rm75ZtuMhzuM"
      nohotkeys
      style="width: 100%;"
    ></mux-player>
    <button type="button" class="play-pause-btn" id="playPauseBtn" aria-label="Play/Pause">
      <svg class="icon-play" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
        <path d="M9.57648 2.53365C7.57781 1.29918 5 2.73688 5 5.08605V18.914C5 21.2632 7.57781 22.7009 9.57648 21.4664L20.7705 14.5524C22.6686 13.3801 22.6686 10.6199 20.7705 9.44763L9.57648 2.53365Z" fill="currentColor"/>
      </svg>
      <svg class="icon-pause" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
        <path d="M4 6C4 4.34315 5.34315 3 7 3C8.65685 3 10 4.34315 10 6V18C10 19.6569 8.65685 21 7 21C5.34315 21 4 19.6569 4 18V6Z" fill="currentColor"/>
        <path d="M14 6C14 4.34315 15.3431 3 17 3C18.6569 3 20 4.34315 20 6V18C20 19.6569 18.6569 21 17 21C15.3431 21 14 19.6569 14 18V6Z" fill="currentColor"/>
      </svg>
    </button>
  </div>

  <script>
    const wrapper = document.getElementById('playerWrapper');
    const player = document.getElementById('muxPlayer');

    function updatePausedState() {
      wrapper.classList.toggle('paused', player.paused);
    }

    function onHover() {
      if (player.paused) {
        player.play();
      }
      updatePausedState();
    }

    function onClick() {
      if (player.paused) {
        player.play();
      } else {
        player.pause();
      }
      updatePausedState();
    }

    wrapper.addEventListener('mouseenter', onHover);
    wrapper.addEventListener('click', onClick);

    player.addEventListener('play', updatePausedState);
    player.addEventListener('pause', updatePausedState);

    // Size player to video's aspect ratio (removes pillarboxing)
    // Min 16:9 until video loads; then match video exactly
    function setAspectRatioFromVideo() {
      const media = player.media || player.querySelector('video');
      if (media && media.videoWidth && media.videoHeight) {
        wrapper.style.aspectRatio = `${media.videoWidth} / ${media.videoHeight}`;
      }
    }

    function onVideoReady() {
      setAspectRatioFromVideo();
      updatePausedState();
      // Fade in only after dimensions are set to avoid layout shift
      requestAnimationFrame(() => {
        wrapper.classList.add('loaded');
      });
    }

    player.addEventListener('loadedmetadata', onVideoReady);

    updatePausedState();
  </script>
</body>
</html>
